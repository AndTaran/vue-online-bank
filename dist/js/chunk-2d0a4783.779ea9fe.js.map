{"version":3,"sources":["webpack:///./src/views/Request.vue","webpack:///./src/views/Request.vue?a27a"],"names":["class","for","value","loading","request","back","title","fio","phone","currency","amount","type","status","id","remove","hasChanges","update","$route","params","setup","route","router","store","dispatch","push","data","components","AppPage","AppLoader","AppStatus","render"],"mappings":"2IAGO,eAAoB,cAAZ,OAAG,G,EACX,eAAwB,cAAhB,WAAO,G,EACf,eAAsB,cAAd,SAAK,G,EAEd,eAAuB,cAAf,UAAM,G,iBAAS,M,GAGpBA,MAAM,gB,EACT,eAAkC,SAA3BC,IAAI,UAAS,UAAM,G,EAExB,eAAsC,UAA9BC,MAAM,QAAO,YAAQ,G,EAC7B,eAA0C,UAAlCA,MAAM,aAAY,WAAO,G,EACjC,eAAuC,UAA/BA,MAAM,UAAS,WAAO,G,EAC9B,eAA4C,UAApCA,MAAM,WAAU,eAAW,G,SAO9BF,MAAM,0B,8HAtBC,EAAAG,S,iBAAlB,eAAwC,YACC,EAAAC,S,iBAAzC,eAoBW,G,MApBDC,KAAA,GAAKC,MAAM,U,yBACnB,iBAA8C,CAA9C,eAA8C,UAA3C,E,eAAoB,KAAE,eAAG,EAAAF,QAAQG,KAAG,KACvC,eAAoD,UAAjD,E,eAAwB,KAAE,eAAG,EAAAH,QAAQI,OAAK,KAC7C,eAA6D,UAA1D,E,eAAsB,KAAE,eAAG,EAAAC,SAAS,EAAAL,QAAQM,SAAM,KACrD,eAEI,UADF,E,EAAyB,eAAgD,GAAnCC,KAAM,EAAAP,QAAQQ,Q,mBAGtD,eAQM,MARN,EAQM,CAPJ,E,eACA,eAKS,UALDC,GAAG,S,qDAAkB,EAAAD,OAAM,K,CACjC,EACA,EACA,EACA,G,cAJ2B,EAAAA,YAQ/B,eAA2D,UAAnDZ,MAAM,aAAc,QAAK,8BAAE,EAAAc,QAAA,EAAAA,OAAA,sBAAQ,WACD,EAAAC,Y,iBAA1C,eAAuE,U,MAA/Df,MAAM,MAAO,QAAK,8BAAE,EAAAgB,QAAA,EAAAA,OAAA,sBAA0B,a,mDAExD,eAEK,KAFL,EAA0C,iBAC3B,eAAG,EAAAC,OAAOC,OAAOL,IAAK,eACrC,I,gHAYa,GACbM,MADa,WAEX,IAAMC,EAAQ,iBACRC,EAAS,iBACTC,EAAQ,iBACRnB,EAAU,gBAAI,GACdC,EAAU,eAAI,IACdQ,EAAS,iBAEf,eAAS,wCAAC,2GACRT,EAAQD,OAAQ,EADR,SAEcoB,EAAMC,SAAS,kBAAmBH,EAAMF,OAAOL,IAF7D,OAERT,EAAQF,MAFA,OAGRU,EAAOV,MAAP,UAAeE,EAAQF,aAAvB,aAAe,EAAeU,OAC9BT,EAAQD,OAAQ,EAJR,4CAOV,IAAMa,EAAa,gBAAS,kBAAMX,EAAQF,MAAMU,SAAWA,EAAOV,SAE5DY,EAAK,yDAAI,8GACPQ,EAAMC,SAAS,iBAAkBH,EAAMF,OAAOL,IADvC,OAEbQ,EAAOG,KAAK,KAFC,2CAAJ,qDAILR,EAAK,yDAAI,2GACPS,EADO,iCACKrB,GADL,IACcQ,OAAQA,EAAOV,MAAOW,GAAIO,EAAMF,OAAOL,KADrD,SAEPS,EAAMC,SAAS,iBAAkBE,GAF1B,OAGbrB,EAAQF,MAAMU,OAASA,EAAOV,MAHjB,2CAAJ,qDAMX,MAAO,CAAEC,UAASC,UAASK,WAAA,KAAUK,SAAQE,SAAQJ,SAAQG,eAE/DW,WAAY,CAAEC,UAAA,KAASC,YAAA,KAAWC,YAAA,OChEpC,EAAOC,OAASA,EAED","file":"js/chunk-2d0a4783.779ea9fe.js","sourcesContent":["<template>\r\n  <app-loader v-if=\"loading\"></app-loader>\r\n  <app-page back title=\"Заявка\" v-else-if=\"request\">\r\n    <p><strong>Имя</strong>: {{ request.fio }}</p>\r\n    <p><strong>Телефон</strong>: {{ request.phone }}</p>\r\n    <p><strong>Сумма</strong>: {{ currency(request.amount) }}</p>\r\n    <p>\r\n      <strong>Статус</strong>: <app-status :type=\"request.status\"></app-status>\r\n    </p>\r\n\r\n    <div class=\"form-control\">\r\n      <label for=\"status\">Статус</label>\r\n      <select id=\"status\" v-model=\"status\">\r\n        <option value=\"done\">Завершен</option>\r\n        <option value=\"cancelled\">Отменен</option>\r\n        <option value=\"active\">Активен</option>\r\n        <option value=\"pending\">Выполняется</option>\r\n      </select>\r\n    </div>\r\n\r\n    <button class=\"btn danger\" @click=\"remove\">Удалить</button>\r\n    <button class=\"btn\" @click=\"update\" v-if=\"hasChanges\">Изменить</button>\r\n  </app-page>\r\n  <h3 v-else class=\"text-center text-white\">\r\n    Заявка с id: {{ $route.params.id }} не найдена\r\n  </h3>\r\n</template>\r\n\r\n<script>\r\nimport { computed, onMounted, ref } from \"vue\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\nimport { useStore } from \"vuex\";\r\nimport AppPage from \"../components/ui/AppPage\";\r\nimport AppLoader from \"../components/ui/AppLoader\";\r\nimport AppStatus from \"../components/ui/AppStatus\";\r\nimport { currency } from \"../utils/currency\";\r\n\r\nexport default {\r\n  setup() {\r\n    const route = useRoute();\r\n    const router = useRouter();\r\n    const store = useStore();\r\n    const loading = ref(true);\r\n    const request = ref({});\r\n    const status = ref();\r\n\r\n    onMounted(async () => {\r\n      loading.value = true;\r\n      request.value = await store.dispatch(\"request/loadOne\", route.params.id);\r\n      status.value = request.value?.status;\r\n      loading.value = false;\r\n    });\r\n\r\n    const hasChanges = computed(() => request.value.status !== status.value);\r\n\r\n    const remove = async () => {\r\n      await store.dispatch(\"request/remove\", route.params.id);\r\n      router.push(\"/\");\r\n    };\r\n    const update = async () => {\r\n      const data = { ...request, status: status.value, id: route.params.id };\r\n      await store.dispatch(\"request/update\", data);\r\n      request.value.status = status.value;\r\n    };\r\n\r\n    return { loading, request, currency, remove, update, status, hasChanges };\r\n  },\r\n  components: { AppPage, AppLoader, AppStatus },\r\n};\r\n</script>\r\n\r\n<style></style>\r\n","import { render } from \"./Request.vue?vue&type=template&id=804ee40e\"\nimport script from \"./Request.vue?vue&type=script&lang=js\"\nexport * from \"./Request.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}